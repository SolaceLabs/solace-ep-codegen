---
components:
  schemas:
    CoffeeShop-Out_of_Stock:
      x-ep-schema-version: "0.1.0"
      x-ep-schema-state-id: "1"
      x-ep-schema-version-id: "taenw9b9d48"
      orderId: 123456
      x-ep-schema-id: "rz2zy8oqgha"
      x-ep-schema-state-name: "DRAFT"
      x-ep-schema-name: "CoffeeShop-Out of Stock"
      x-ep-application-domain-id: "77jhw5yw9oy"
      items:
      - quantity: 2
        productID: "COF001"
        productName: "Americano"
        status: "Out of stock"
      x-ep-schema-version-displayname: ""
      x-ep-shared: "false"
      x-ep-application-domain-name: "CoffeeShop - Order Management"
    CoffeeShop-Order_Details:
      x-ep-schema-version: "0.1.0"
      x-ep-schema-version-id: "tkuii1g2aj9"
      orderId: 123456
      x-ep-schema-state-name: "DRAFT"
      x-ep-schema-name: "CoffeeShop-Order Details"
      x-ep-application-domain-id: "77jhw5yw9oy"
      x-ep-schema-version-displayname: ""
      x-ep-shared: "false"
      x-ep-application-domain-name: "CoffeeShop - Order Management"
      x-ep-schema-state-id: "1"
      pickupTime: "2024-01-05T14:30:00"
      specialInstructions: "Please make it extra hot."
      x-ep-schema-id: "nvklogeamt0"
      items:
      - quantity: 2
        productID: "COF001"
        size: "Medium"
        options:
        - "Extra Shot"
        - "Whipped Cream"
        productName: "Americano"
      - quantity: 1
        productID: "PST001"
        productName: "Chocolate Croissant"
    CoffeeShop-Order_ETA_:
      x-ep-schema-version: "0.1.0"
      x-ep-schema-version-id: "ssvjv64c9kc"
      orderID: 123456
      x-ep-schema-state-name: "DRAFT"
      x-ep-schema-name: "CoffeeShop-Order ETA "
      x-ep-application-domain-id: "77jhw5yw9oy"
      x-ep-schema-version-displayname: ""
      x-ep-shared: "false"
      x-ep-application-domain-name: "CoffeeShop - Order Management"
      x-ep-schema-state-id: "1"
      eta: "2024-01-05T14:30:00"
      requestId: 44343
      x-ep-schema-id: "s1jrd2r9m1c"
    CoffeeShop-New_Order:
      x-ep-schema-version: "0.1.0"
      x-ep-schema-version-id: "9073hi65njm"
      totalPrice: 12.5
      x-ep-schema-state-name: "DRAFT"
      x-ep-schema-name: "CoffeeShop-New Order"
      source: "mobile"
      storeID: 437
      x-ep-application-domain-id: "77jhw5yw9oy"
      x-ep-schema-version-displayname: ""
      x-ep-shared: "false"
      x-ep-application-domain-name: "CoffeeShop - Order Management"
      x-ep-schema-state-id: "1"
      pickupTime: "2024-01-05T14:30:00"
      sourceType: "Canada"
      requestId: 44334
      specialInstructions: "Please make it extra hot."
      x-ep-schema-id: "g2niy4tkfww"
      region: "Ontario"
      items:
      - quantity: 2
        productID: "COF001"
        size: "Medium"
        options:
        - "Extra Shot"
        - "Whipped Cream"
        productName: "Americano"
      - quantity: 1
        productID: "PST001"
        productName: "Chocolate Croissant"
      customer:
        phone: "123-456-7890"
        name: "John Doe"
        email: "john.doe@example.com"
  messages:
    OM-Order_Details:
      x-ep-event-id: "h2y7mkf9k4k"
      x-ep-event-version-displayname: ""
      description: ""
      x-ep-application-domain-id: "77jhw5yw9oy"
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      x-ep-event-state-name: "DRAFT"
      x-ep-shared: "false"
      x-ep-application-domain-name: "CoffeeShop - Order Management"
      x-ep-event-version-id: "9jopjbyz2gf"
      payload:
        $ref: "#/components/schemas/CoffeeShop-Order_Details"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "OM-Order Details"
      contentType: "application/json"
      x-ep-event-state-id: "1"
    OM-Order_Update:
      x-ep-event-id: "5zkgepwn74w"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "pr520ig6o71"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "OM-Order Update"
      description: ""
      x-ep-application-domain-id: "77jhw5yw9oy"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
      x-ep-shared: "false"
      x-ep-application-domain-name: "CoffeeShop - Order Management"
    BS-Order_Completed:
      x-ep-event-id: "bqhx79m24o6"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "rgxa25wjrvl"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "BS-Order Completed"
      description: ""
      x-ep-application-domain-id: "77jhw5yw9oy"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
      x-ep-shared: "false"
      x-ep-application-domain-name: "CoffeeShop - Order Management"
    OM-New_Order:
      x-ep-event-id: "tl6defz0ccn"
      x-ep-event-version-displayname: ""
      description: ""
      x-ep-application-domain-id: "77jhw5yw9oy"
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      x-ep-event-state-name: "DRAFT"
      x-ep-shared: "false"
      x-ep-application-domain-name: "CoffeeShop - Order Management"
      x-ep-event-version-id: "ufl3rxdw6nt"
      payload:
        $ref: "#/components/schemas/CoffeeShop-New_Order"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "OM-New Order"
      contentType: "application/json"
      x-ep-event-state-id: "1"
    KF-Order_Prep_Started:
      x-ep-event-id: "lpujb4hinyh"
      x-ep-event-version-displayname: ""
      description: ""
      x-ep-application-domain-id: "77jhw5yw9oy"
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      x-ep-event-state-name: "DRAFT"
      x-ep-shared: "false"
      x-ep-application-domain-name: "CoffeeShop - Order Management"
      x-ep-event-version-id: "95gut5tca16"
      payload:
        $ref: "#/components/schemas/CoffeeShop-Order_ETA_"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "KF-Order Prep Started"
      contentType: "application/json"
      x-ep-event-state-id: "1"
    KF-Order_Ready:
      x-ep-event-id: "yrnq9p1kgpp"
      x-ep-event-version-displayname: ""
      x-ep-event-version-id: "ebt4fa0k0il"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "KF-Order Ready"
      description: ""
      x-ep-application-domain-id: "77jhw5yw9oy"
      x-ep-event-state-id: "1"
      x-ep-event-state-name: "DRAFT"
      x-ep-shared: "false"
      x-ep-application-domain-name: "CoffeeShop - Order Management"
    KF-Order_OutOfStock:
      x-ep-event-id: "6rict1ymqpd"
      x-ep-event-version-displayname: ""
      description: ""
      x-ep-application-domain-id: "77jhw5yw9oy"
      schemaFormat: "application/vnd.aai.asyncapi+json;version=2.0.0"
      x-ep-event-state-name: "DRAFT"
      x-ep-shared: "false"
      x-ep-application-domain-name: "CoffeeShop - Order Management"
      x-ep-event-version-id: "98y026200hh"
      payload:
        $ref: "#/components/schemas/CoffeeShop-Out_of_Stock"
      x-ep-event-version: "0.1.0"
      x-ep-event-name: "KF-Order OutOfStock"
      contentType: "application/json"
      x-ep-event-state-id: "1"
channels:
  coffeeshop/order/status/v1/ready/{source}/{country}/{storeId}/{orderId}:
    publish:
      bindings:
        solace:
          destinations:
          - destinationType: "queue"
            queue:
              name: "CS:Order Status"
              topicSubscriptions:
              - "coffeeshop/order/status/v1/completed/*/*/*/*"
              - "coffeeshop/order/status/v1/inprogress/*/*/*/*"
              - "coffeeshop/order/status/v1/outofstock/*/*/*/*"
              - "coffeeshop/order/status/v1/ready/*/*/*/*"
          bindingVersion: "0.3.0"
      message:
        $ref: "#/components/messages/KF-Order_Ready"
    parameters:
      country:
        schema:
          type: "string"
        x-ep-parameter-name: "country"
      orderId:
        schema:
          type: "string"
        x-ep-parameter-name: "orderId"
      source:
        schema:
          type: "string"
        x-ep-parameter-name: "source"
      storeId:
        schema:
          type: "string"
        x-ep-parameter-name: "storeId"
  coffeeshop/order/status/v1/inprogress/{source}/{country}/{storeId}/{orderId}:
    publish:
      bindings:
        solace:
          destinations:
          - destinationType: "queue"
            queue:
              name: "CS:Order Status"
              topicSubscriptions:
              - "coffeeshop/order/status/v1/completed/*/*/*/*"
              - "coffeeshop/order/status/v1/inprogress/*/*/*/*"
              - "coffeeshop/order/status/v1/outofstock/*/*/*/*"
              - "coffeeshop/order/status/v1/ready/*/*/*/*"
          bindingVersion: "0.3.0"
      message:
        $ref: "#/components/messages/KF-Order_Prep_Started"
    parameters:
      country:
        schema:
          type: "string"
        x-ep-parameter-name: "country"
      orderId:
        schema:
          type: "string"
        x-ep-parameter-name: "orderId"
      source:
        schema:
          type: "string"
        x-ep-parameter-name: "source"
      storeId:
        schema:
          type: "string"
        x-ep-parameter-name: "storeId"
  coffeeshop/order/update/v1/{source}/{country}/{storeId}/{orderId}:
    subscribe:
      message:
        $ref: "#/components/messages/OM-Order_Update"
    parameters:
      country:
        schema:
          type: "string"
        x-ep-parameter-name: "country"
      orderId:
        schema:
          type: "string"
        x-ep-parameter-name: "orderId"
      source:
        schema:
          type: "string"
        x-ep-parameter-name: "source"
      storeId:
        schema:
          type: "string"
        x-ep-parameter-name: "storeId"
  coffeeshop/order/details/v1/{source}/{country}/{storeId}/{orderId}:
    subscribe:
      message:
        $ref: "#/components/messages/OM-Order_Details"
    parameters:
      country:
        schema:
          type: "string"
        x-ep-parameter-name: "country"
      orderId:
        schema:
          type: "string"
        x-ep-parameter-name: "orderId"
      source:
        schema:
          type: "string"
        x-ep-parameter-name: "source"
      storeId:
        schema:
          type: "string"
        x-ep-parameter-name: "storeId"
  coffeeshop/order/status/v1/completed/{source}/{country}/{storeId}/{orderId}:
    publish:
      bindings:
        solace:
          destinations:
          - destinationType: "queue"
            queue:
              name: "CS:Order Status"
              topicSubscriptions:
              - "coffeeshop/order/status/v1/completed/*/*/*/*"
              - "coffeeshop/order/status/v1/inprogress/*/*/*/*"
              - "coffeeshop/order/status/v1/outofstock/*/*/*/*"
              - "coffeeshop/order/status/v1/ready/*/*/*/*"
          bindingVersion: "0.3.0"
      message:
        $ref: "#/components/messages/BS-Order_Completed"
    parameters:
      country:
        schema:
          type: "string"
        x-ep-parameter-name: "country"
      orderId:
        schema:
          type: "string"
        x-ep-parameter-name: "orderId"
      source:
        schema:
          type: "string"
        x-ep-parameter-name: "source"
      storeId:
        schema:
          type: "string"
        x-ep-parameter-name: "storeId"
  coffeeshop/order/status/v1/outofstock/{source}/{country}/{storeId}/{orderId}:
    publish:
      bindings:
        solace:
          destinations:
          - destinationType: "queue"
            queue:
              name: "CS:Order Status"
              topicSubscriptions:
              - "coffeeshop/order/status/v1/completed/*/*/*/*"
              - "coffeeshop/order/status/v1/inprogress/*/*/*/*"
              - "coffeeshop/order/status/v1/outofstock/*/*/*/*"
              - "coffeeshop/order/status/v1/ready/*/*/*/*"
          bindingVersion: "0.3.0"
      message:
        $ref: "#/components/messages/KF-Order_OutOfStock"
    parameters:
      country:
        schema:
          type: "string"
        x-ep-parameter-name: "country"
      orderId:
        schema:
          type: "string"
        x-ep-parameter-name: "orderId"
      source:
        schema:
          type: "string"
        x-ep-parameter-name: "source"
      storeId:
        schema:
          type: "string"
        x-ep-parameter-name: "storeId"
  coffeeshop/order/new/v1/{source}/{country}/{storeId}/{requestId}:
    subscribe:
      message:
        $ref: "#/components/messages/OM-New_Order"
    publish:
      bindings:
        solace:
          destinations:
          - destinationType: "queue"
            queue:
              name: "CS:New Orders"
              topicSubscriptions:
              - "coffeeshop/order/new/v1/*/*/*/*"
          bindingVersion: "0.3.0"
      message:
        $ref: "#/components/messages/OM-New_Order"
    parameters:
      country:
        schema:
          type: "string"
        x-ep-parameter-name: "country"
      requestId:
        schema:
          type: "string"
        x-ep-parameter-name: "requestId"
      source:
        schema:
          type: "string"
        x-ep-parameter-name: "source"
      storeId:
        schema:
          type: "string"
        x-ep-parameter-name: "storeId"
asyncapi: "2.5.0"
info:
  x-ep-application-version: "0.1.0"
  x-ep-application-version-id: "86tpmk42drw"
  x-ep-application-id: "2aqm3rx0ds4"
  x-ep-state-name: "DRAFT"
  title: "Order Management"
  x-ep-application-domain-id: "77jhw5yw9oy"
  version: "0.1.0"
  x-ep-state-id: "1"
  x-ep-application-domain-name: "CoffeeShop - Order Management"
